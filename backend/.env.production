# ====================================
# NOURX BACKEND - PRODUCTION CONFIG
# ====================================
# SECURITY: Never commit this file with real secrets!
# Use environment variables or secret management systems

# Configuration Base de Données (Production)
POSTGRES_HOST=your-production-db-host
POSTGRES_PORT=5432
POSTGRES_USER=nourx_prod
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD
POSTGRES_DB=nourx_app_prod

# Configuration Serveur
NODE_ENV=production
PORT=3001
HOST=0.0.0.0

# Configuration Better Auth (CRITICAL: Generate unique secrets!)
BETTER_AUTH_SECRET=CHANGE_THIS_32_CHAR_PRODUCTION_SECRET_KEY
BETTER_AUTH_URL=https://api.yourcompany.com

# Configuration JWT (CRITICAL: Generate unique secrets!)
JWT_SECRET=CHANGE_THIS_JWT_SECRET_FOR_PRODUCTION
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Configuration Email (Production SMTP)
SMTP_HOST=smtp.yourmailprovider.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=noreply@yourcompany.com
SMTP_PASSWORD=CHANGE_THIS_EMAIL_PASSWORD
SMTP_FROM_NAME="Your Company Name"
SMTP_FROM_EMAIL=noreply@yourcompany.com

# Configuration CORS (Your frontend domains)
CORS_ORIGIN=https://app.yourcompany.com,https://admin.yourcompany.com

# Configuration Logs (Production: info or warn)
LOG_LEVEL=info

# Configuration Rate Limiting (Production: More restrictive)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=200
RATE_LIMIT_AUTH_MAX=10

# Configuration Upload (Production limits)
MAX_FILE_SIZE=104857600
FILE_STORAGE_PATH=/app/storage

# Configuration Admin par défaut (CHANGE THESE!)
DEFAULT_ADMIN_EMAIL=admin@yourcompany.com
DEFAULT_ADMIN_PASSWORD=CHANGE_THIS_SECURE_ADMIN_PASSWORD
DEFAULT_ADMIN_NAME="System Administrator"

# Configuration Sécurité (Production: More strict)
MAX_LOGIN_ATTEMPTS=3
LOCKOUT_DURATION_MS=1800000

# ====================================
# REDIS CACHE (REQUIRED for Production)
# ====================================

# Redis Connection (Use Redis Cloud or AWS ElastiCache)
REDIS_HOST=your-redis-host.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_DB=0
REDIS_TTL_DEFAULT=3600

# ====================================
# AWS S3 STORAGE (REQUIRED for Production)
# ====================================

# AWS Credentials (Use IAM roles in production)
AWS_REGION=eu-west-1
AWS_ACCESS_KEY_ID=CHANGE_THIS_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_THIS_AWS_SECRET_KEY

# S3 Buckets (Production buckets)
S3_BUCKET_DOCUMENTS=yourcompany-prod-documents
S3_BUCKET_DELIVERABLES=yourcompany-prod-deliverables
S3_BUCKET_BACKUPS=yourcompany-prod-backups
S3_PRESIGNED_URL_EXPIRY=1800

# ====================================
# BACKUP SYSTEM (CRITICAL for Production)
# ====================================

# Backup Configuration
BACKUP_RETENTION_DAYS=90
BACKUP_PATH=/backups
BACKUP_S3_ENABLED=true
BACKUP_CRON_SCHEDULE=0 2 * * *

# ====================================
# STORAGE CONFIGURATION
# ====================================

# Storage Provider (Production: Always S3)
STORAGE_PROVIDER=s3
STORAGE_FALLBACK=false
STORAGE_BASE_URL=https://cdn.yourcompany.com

# ====================================
# MONITORING & OBSERVABILITY (REQUIRED)
# ====================================

# Application Monitoring
METRICS_ENABLED=true
SENTRY_DSN=CHANGE_THIS_SENTRY_DSN
SENTRY_ENVIRONMENT=production

# Health Check Timeouts
HEALTH_CHECK_DB_TIMEOUT=3000
HEALTH_CHECK_REDIS_TIMEOUT=2000

# ====================================
# PRODUCTION SECURITY
# ====================================

# SSL/TLS Configuration
FORCE_HTTPS=true
TRUST_PROXY=true

# Security Headers
CSP_ENABLED=true
HSTS_ENABLED=true

# API Security
API_KEY_REQUIRED=false
API_RATE_LIMIT_STRICT=true

# ====================================
# PRODUCTION PERFORMANCE
# ====================================

# Database Connection Pool
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000

# Memory Management
NODE_OPTIONS=--max_old_space_size=2048

# Clustering
CLUSTER_WORKERS=0

# ====================================
# PRODUCTION MONITORING
# ====================================

# Error Reporting
ERROR_REPORTING_ENABLED=true
ERROR_WEBHOOK_URL=

# Performance Monitoring
PERFORMANCE_MONITORING=true
SLOW_QUERY_THRESHOLD=1000

# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365